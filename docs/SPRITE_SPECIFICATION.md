# Fantasy RTS - スプライト仕様策定

**作成日**: 2026-01-24
**複雑度**: 🔴 hard
**依存**: TICKET-013

---

## 目的

ユニットごとの視覚的識別性を高め、ゲームプレイの理解を深めるためのスプライト仕様を策定する。

---

## スプライトクラス構成

各ユニットは以下のクラスを持つ:

### 1. 頭部スプライト（Portrait）
- **役割**: ユニットの識別・武将情報表示
- **サイズ**: 64x64px
- **構成要素**:
  - 髪型（キャラクター固有）
  - 顔の表情
  - 帽子・兜（武将・騎士）
  - マントの色（陣営色）

### 2. 体部スプライト（Body）
- **役割**: ユニットの種別・装備を表示
- **サイズ**: 64x64px
- **構成要素**:
  - 鎧の種別
  - 武器の種別
  - 色分け（陣営色）
  - フラグ（ステータスボーン、範囲攻撃効果など）

### 3. フレーム（Sprite Frame）
- **役割**: アニメーション表示用
- **サイズ**: 64x64px
- **構成要素**:
  - 前衛後退アニメーション（scaleY)
  - 攻撃アニメーション（scaleX）
  - ダメージアニメーション（shake）

---

## ユニットタイプ別仕様

### 小サイズユニット (size: 1, sizeShape: 'single')

| ユニットタイプ | 髪型 | 鎧種別 | 武器 | 色調 | 特殊 |
|---|---|---|---|---|---|
| **歩兵** (INFANTRY) | 短髪 | 軽装鎧 | 剣 | 柔色 | なし |
| **騎士** (KNIGHT) | 短髪 | 重装鎧 | 盾 | 濃色 | 盾効果 |
| **弓兵** (ARCHER) | 長髪 | 皮装備 | 弓 | 暖色 | 弓効果 |
| **槍兵** (SPEAR) | 短髪 | 軽装鎧 | 槍 | 中間色 | 槍効果 |
| **銃士** (GUNNER) | 短髪 | 皮装備 | 銃 | 冷色 | 銃発射エフェクト |
| **魔術師** (MAGE) | 女性長髪 | ローブ | 魔導書 | 紫色 | マナチャージエフェクト |
| **僧侶** (PRIEST) | 女性短髪 | 僧衣 | 杖 | 白色 | 薬草のエフェクト |

### 中サイズユニット (size: 2, sizeShape: 'vertical')

| ユニットタイプ | 髪型 | 鎧種別 | 武器 | 色調 | 特殊 |
|---|---|---|---|---|---|
| **騎兵** (CAVALRY) | 短髪 | 重装鎧 | 長槍 | 濃色 | 押し出し効果 |

### 大サイズユニット (size: 4, sizeShape: '2x2')

| ユニットタイプ | 髪型 | 鎧種別 | 武器 | 色調 | 特殊 |
|---|---|---|---|---|---|
| **ドラゴン** (DRAGON) | 獣髪 | なし | ドラゴンブレス | 緑系 | 燃焼エフェクト |
| **竜騎兵** (DRAGON_RIDER) | 短髪 | 重装鎧 | 剣 | 濃色 | 空中飛行エフェクト |
| **砲兵** (ARTILLERY) | 短髪 | 重装鎖 | 砲 | 灰色 | 砲撃煙エフェクト |

---

## 陣営色定義

```javascript
EAST_COLOR = '#88AAEE'  // 青
WEST_COLOR = '#EE4444'  // 赤
```

---

## エフェクト定義

### 陣形エフェクト
- **鋒矢**: 炎のエフェクト（前方）
- **鶴翼**: 羽のエフェクト（両側）
- **魚鱗**: 水波のエフェクト（後方）

### 特殊状態エフェクト
- **攻撃中**: 赤い光（scaleX 1.2 → 1.0）
- **被弾中**: 画面のシェイク
- **HP減少**: 赤いバフ
- **回復**: 青いバフ
- **範囲攻撃**: 青い円形エフェクト

---

## アニメーション仕様

### 1. 移動アニメーション
- **周期**: 0.5秒
- **動き**: Y軸に上下揺れ（sin波）
- **効果**: `scaleY`を `0.95 → 1.05 → 0.95` で変化

### 2. 攻撃アニメーション
- **周期**: 0.3秒
- **動き**: X軸にスイング（scaleX）
- **効果**: `1.0 → 1.2 → 1.0` で変化

### 3. ダメージアニメーション
- **周期**: 0.2秒
- **動き**: 画面シェイク（translateX）
- **効果**: `-2px → 2px → -2px → 2px → 0px`

### 4. 待機アニメーション
- **周期**: 2秒
- **動き**: ゆっくりな呼吸
- **効果**: `scaleY`を `1.0 → 1.02 → 1.0` で変化

---

## 実装優先順位

### P0: 必須スプライト（現状マーカーのみ）
1. INFANTRY - 歩兵
2. KNIGHT - 騎士
3. ARCHER - 弓兵
4. PRIEST - 僧侶
5. CAVALRY - 騎兵

### P1: 重要スプライト
6. SPEAR - 槍兵
7. GUNNER - 銃士
8. MAGE - 魔術師

### P2: 高級スプライト
9. DRAGON - ドラゴン
10. DRAGON_RIDER - 竜騎兵
11. ARTILLERY - 砲兵

### P3: エフェクト
12. 陣形エフェクト
13. 特殊状態エフェクト
14. アニメーションシステム

---

## マーカー代替案

スプライト未実装時は以下のマーカーを使用:
- ⚔️ - 歩兵
- 🛡️ - 騎士
- 🏹 - 弓兵
- 🔱 - 槍兵
- 🔫 - 銃士
- ✨ - 魔術師
- ✝️ - 僧侶
- 🐴 - 騎兵
- 🐉 - ドラゴン
- 🦅 - 竜騎兵
- 💣 - 砲兵

---

## 完了条件

- [x] 仕様書策定完了
- [ ] スプライト生成スクリプト実装
- [ ] スプライトプレビュー画面実装
- [ ] 3Dレンダラーへの統合
